<?xml version="1.0" encoding="UTF-8"?>
<config_metabuild>

<!--
 ===============================================================
 COMPONENT
 ===============================================================
 Specifies the variable mapping from CIME variables to the
 components build system variables

 Conditional requirements are specified as attributes, and values to be used are specified as values of elements
-->

<component>
  <configuration buildtool="CMake">
    <!-- Variables to be defined for all CMake configurations -->
    <CMAKE_Fortran_COMPILER>
      <type>STRING</type>
      <value>${MPIFC}</value>
    </CMAKE_Fortran_COMPILER>
    <CMAKE_C_COMPILER>
      <type>STRING</type>
      <value>${MPICC}</value>
    </CMAKE_C_COMPILER>
    <CMAKE_CXX_COMPILER>
      <type>STRING</type>
      <value>${MPICXX}</value>
    </CMAKE_CXX_COMPILER>

    <CMAKE_Fortran_FLAGS>
      <type>STRING</type>
      <value>${FFLAGS} ${FPPDEFS} ${INCLDIR}</value>
    </CMAKE_Fortran_FLAGS>
    <CMAKE_C_FLAGS>
      <type>STRING</type>
      <value>${CFLAGS} ${INCLDIR}</value>
    </CMAKE_C_FLAGS>
    <CMAKE_CXX_FLAGS>
      <type>STRING</type>
      <value>${CXXFLAGS} ${INCLDIR}</value>
    </CMAKE_CXX_FLAGS>

    <CMAKE_VERBOSE_MAKEFILE>
      <type>BOOL</type>
      <value>ON</value>
    </CMAKE_VERBOSE_MAKEFILE>
  </configuration>
</component>

<component COMP="gptl">
  <!-- Where to find the component -->
  <component_path>${CIMEROOT}/externals/pio2/src/gptl</component_path>
  <!-- What build system the component uses -->
  <buildtool>CMake</buildtool>
  <configuration>
    <!-- CMake variable specification -->
    <CMAKE_MODULE_PATH>
      <type>PATH</type>
      <value>${CIMEROOT}/externals/pio2/cmake</value>
    </CMAKE_MODULE_PATH>
  </configuration>
</component>

<component COMP="pio1">
  <!-- Before building pio1, gptl must be built -->
  <requires>gptl</requires>
  <component_path>${CIMEROOT}/externals/pio1</component_path>
  <buildtool>CMake</buildtool>
  <configuration>
    <CMAKE_MODULE_PATH>
      <type>PATH</type>
      <value>${CIMEROOT}/externals/pio2/cmake</value>
    </CMAKE_MODULE_PATH>

    <GPTL_PATH>
      <type>PATH</type>
      <value>${GPTL_PATH}</value>
    </GPTL_PATH>

    <NetCDF_PATH>
      <type>PATH</type>
      <value NETCDF_SEPARATE="False">${NETCDF_PATH}</value>
      <value NETCDF_SEPARATE="True">${NETCDF_C_PATH}</value>
    </NetCDF_PATH>
    <NetCDF_Fortran_PATH>
      <type>PATH</type>
      <value NETCDF_SEPARATE="True">${NETCDF_FORTRAN_PATH}</value>
    </NetCDF_Fortran_PATH>
    <PnetCDF_PATH>
      <type>PATH</type>
      <value>${PNETCDF_PATH}</value>
    </PnetCDF_PATH>
  </configuration>
</component>

</config_metabuild>
